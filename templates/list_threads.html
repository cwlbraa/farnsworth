{% extends "base.html" %}

{% load static from staticfiles %}

{% block headers %}
<link type="text/css" rel="stylesheet" href="{% static 'ui/css/content.css' %}" />
<link type="text/css" rel="stylesheet" href="{% static 'ui/css/list_threads.css' %}" />
<link type="text/css" rel="stylesheet" href="{% static 'jquery/tablesorter-master/css/theme.default.css' %}" />
{% endblock %}

{% block content %}
<div class="threads table_container span12">
	<div class="header">
		{% if page_name == 'Archives - All Threads' %}
			<form action="{% url 'all_threads' %}">
			<button class="btn btn-info header_button" type="submit"><span class="glyphicon glyphicon-th-large"></span> Expanded View</button>
			</form>
		{% elif page_name == 'My Threads' %}
			<form action="{% url 'my_threads' %}">
			<button class="btn btn-info header_button" type="submit"><span class="glyphicon glyphicon-th-large"></span> Expanded View</button>
			</form>
		{% endif %}
		<h3 class="table_title">
			{{ page_name }}
		</h3>
	</div>
  {% if not threads %}
  <div class="field_wrapper">No threads found.</div>
  {% else %}
  <table class="table table-striped table-bordered table-condensed table-hover" id="threads_table">
    <thead>
      <tr>
	<th>Subject</th>
	{% if page_name == 'Archives - All Threads' %}<th>Thread Owner</th>{% endif %}
	<th>Messages</th>
	<th>Posted (Y/M/D)</th>
	<th>Updated (Y/M/D)</th>
      </tr>
    </thead>
    <tbody>
      {% for thread in threads %}
      <tr>
	<td><a title="View Thread" class="page_link" href="{% url 'view_thread' thread_pk=thread.pk %}">{% if page_name == 'Archives - All Threads' %}{{ thread.subject|truncatechars:40 }}{% else %}{{ thread.subject|truncatechars:60 }}{% endif %}</a></td>
	{% if page_name == 'Archives - All Threads' %}<td><a class="page_link" href="{% url 'member_profile' targetUsername=thread.owner.user.username %}" title="View Profile">{{ thread.owner.user.first_name }} {{ thread.owner.user.last_name }}</a></td>{% endif %}
	<td>{{ thread.number_of_messages }}</td>
	<td>{{ thread.start_date|date:"Y/m/d, A h:i:s" }}</td>
	<td>{{ thread.change_date|date:"Y/m/d, A h:i:s" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
{% endblock %}

{% block endscripts %}
<script>
$(document).ready(function() {
	$('table').tablesorter({
		sortList: [[4,0], [3,0]]
	});
});
</script>
{% endblock %}
