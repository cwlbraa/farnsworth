{% extends "w_base.html" %}

{% load static from staticfiles %}
{% load request_tags %}
{% load bootstrap %}

{% block w_headers %}
<link type="text/css" rel="stylesheet" href="{% static 'ui/css/content.css' %}" />
<script type="text/javascript" src="{% static 'jquery/jquery-1.11.0.min.js' %}"></script>
<script src="{% static 'ui/js/jquery.formset.js' %}"></script>
<script type="text/javascript">
  $(function() {
  $("#preferences_form tbody tr").formset({
  prefix: "{{ time_formset.prefix }}",
  })})
</script>
{% endblock %}

{% block w_content %}
<div class="table_container">
  <form id="preferences_form" method="post" action="" name="update_profile">
	{% csrf_token %}
	{% for form in type_forms %}
	<div>
	  <h4>{{ form.wtype.title }}:</h4>
	  {{ form|bootstrap }}
	</div>
	{% endfor %}
	<table >
	  <tbody>
		{% for form in time_formset.forms %}
		<tr>
		  <td>{{ form.preference}}</td>
		  <td>{{ form.day }}</td>
		  <td>{{ form.start_time }}</td>
		  <td>{{ form.end_time }}</td>
		</tr>
		{% endfor %}
	  </tbody>
	</table>
	{{ time_formset.management_form }}
	<button type="submit" class="btn btn-success">Update preferences</button>
  </form>
</div> <!-- .table_container -->
{% endblock %}

{% block endscripts %}
<script type="text/javascript" src="{% static 'js/moment.min.js' %}"></script>
<script type="text/javascript" src="{% static 'bootstrap/js/bootstrap-datetimepicker.min.js' %}"></script>
<script type="text/javascript">
  $(function(){$("[id$=start_time]").timepicker();});
  $(function(){$("[id$=end_time]").timepicker();});
</script>
{% endblock %}
