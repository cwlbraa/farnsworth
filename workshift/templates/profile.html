{% extends "w_base.html" %}

{% load static from staticfiles %}
{% load request_tags %}
{% load bootstrap %}
{% load workshift_tags %}

{% block w_headers %}
{% endblock %}

{% block w_content %}
<h3>{{ page_name }}</h3>
<div class="instance_container">
  <a href="{% wurl 'workshift:preferences' targetUsername=profile.user.username sem_url=SEMESTER.sem_url %}">Edit your preferences</a>

  {% if regular_shifts %}
  <h4>Regular Shifts</h4>
  <table class="table table-striped table-bordered table-condensed table-hover members_table" id="regular_shifts_table">
	<thead>
	  <tr>
		<th>Title</th>
		<th>Time</th>
		<th>Hours</th>
	  </tr>
	</thead>
	<tbody>
	  {% for shift in regular_shifts %}
	  <tr>
		<td><a href="{% wurl 'workshift:view_shift' pk=shift.pk sem_url=SEMESTER.sem_url %}">{{ shift.title }}</a></td>
		<td>{% if not shift.week_long %} {{ shift.day }} {{ shift.start_time }}-{{ shift.end_time }}{% else %}Week long{% endif %}</td>
		<td>{{ shift.hours }} hour{{ shift.hours|pluralize }}</td>
	  </tr>
	  {% endfor %}
	</tbody>
  </table>
  {% endif %}

  {% if past_shifts %}
  <h4>Past Shifts</h4>
  <table class="table table-striped table-bordered table-condensed table-hover members_table" id="past_shifts_table">
	<thead>
	  <tr>
		<th>Title</th>
		<th>Date</th>
		<th>Hours</th>
		<th>Status</th>
	  </tr>
	</thead>
	<tbody>
	  {% for shift in past_shifts %}
	  <tr>
		<td><a href="{% wurl 'workshift:view_instance' pk=shift.pk sem_url=SEMESTER.sem_url %}">{{ shift.title }}</a></td>
		<td>{{ shift.date }}</td>
		<td>{{ shift.hours }}</td>
		<td>{% if shift.blown %}<font color="red">BLOWN</font>{% elif shift.verifier %}- <font color="green">Verified by <a href="{% wurl 'workshift:profile' targetUsername=shift.verifier.user.username sem_url=SEMESTER.sem_url %}">{{ shift.verifier.user.get_full_name }}</a>{% endif %}</td>
	  </tr>
	  {% endfor %}
	</tbody>
  </table>
  {% endif %}
  {% if profile.pool_hours.all %}
  <h4>Workshift Requirements</h4>
  <table class="table table-striped table-bordered table-condensed table-hover members_table" id="pool_hours_table">
	<thead>
	  <tr>
		<th>Title</th>
		<th>Hours</th>
		<th>Current Standing</th>
		<th>First Fine Date Standing</th>
		<th>Second Fine Date Standing</th>
		<th>Third Fine Date Standing</th>
	  </tr>
	</thead>
	<tbody>
	  {% for pool_hour in profile.pool_hours.all %}
	  <tr>
		<td><a href="">{{ pool_hour.pool.title }}</a>:</td>
		<td>{{ pool_hour.hours }} {% if pool_hours.pool.weeks_per_period == 0 %}per semester{% elif pool_hours.pool.weeks_per_period == 1 %}per week{% else %}per {{ pool_hours.pool.weeks_per_period }} weeks{% endif %}</td>
		<td>{% if 0 > pool_hour.standing %}<font color="red">{% else %}<font color="green">{% endif %}{{ pool_hour.standing }}</font></td>
		{% if pool_hour.first_date_standing %}
		<td>First Fine Date Standing: {{ pool_hour.first_date_standing }}</td>
		{% endif %}
		{% if pool_hour.second_date_standing %}
		<td>Second Fine Date Standing: {{ pool_hour.second_date_standing }}</td>
		{% endif %}
		{% if pool_hour.third_date_standing %}
		<td>Third Fine Date Standing: {{ pool_hour.third_date_standing }}</td>
		{% endif %}
	  </tr>
	  {% endfor %}
	</tbody>
  </table>
  {% endif %}
  {% if profile.note %}
  <h4>Profile notes</h4>
  <p>{{ profile.note }}</p>
  {% endif %}
</div> <!-- .instance_container -->
{% endblock %}
